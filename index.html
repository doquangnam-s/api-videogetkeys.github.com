<!DOCTYPE html>
<html>
<head>
  <title>Trích xuất thông tin từ URL</title>
</head>
<body>
  <h1>Thông tin từ URL</h1>
  <pre id="json-output"></pre>

  <script>
    function getIPAddress() {
      fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
          const ipAddress = data.ip;

          const queryParams = window.location.search;
          const params = new URLSearchParams(queryParams);
          const name = params.get('url');
          const tile = params.get('tile');

          // Tạo đối tượng JSON từ dữ liệu thu thập được
          const info = {
            tile: tile || 'Không tìm thấy tên',
            url: name || 'Không tìm thấy tên',
            ip: ipAddress || 'Không tìm thấy địa chỉ IP'
          };

          // Hiển thị dữ liệu dưới dạng JSON
          document.getElementById('json-output').textContent = JSON.stringify(info, null, 2);
        })
        .catch(error => {
          console.error('Có lỗi xảy ra khi lấy địa chỉ IP:', error);
        });
    }

    // Gọi hàm lấy địa chỉ IP sau khi trang đã tải xong
    document.addEventListener('DOMContentLoaded', getIPAddress);
  </script>
</body>
</html>
